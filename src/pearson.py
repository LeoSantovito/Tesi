import matplotlib.pyplot as plt
import numpy as np
from scipy.stats import linregress, pearsonr


x =  [ 0.479, 0.489, 0.492, 0.575, 0.565, 0.642, 0.785, 0.788, 0.794 ]

y =  [ 0.089, 0.09, 0.104, 0.042, 0.001, 0.056, 0.074, 0.061, 0.078]

# Calcolo Pearson
r_value, p_value = pearsonr(x, y)

# Calcolo retta di regressione (usiamo linregress per ottenere slope/intercept)
slope, intercept, *_ = linregress(x, y)

# Valori della retta
x_line = np.linspace(min(x), max(x), 100)
y_line = slope * x_line + intercept

# Plot
plt.figure(figsize=(8, 5))
plt.scatter(x, y, color='blue', label='Dati')
plt.plot(x_line, y_line, color='red', linestyle='--', label='Retta di regressione')
plt.xlabel("Delta H@1")
plt.ylabel("Supporto Medio")
plt.title("TransE")
plt.legend()
plt.grid(True)
plt.tight_layout()
plt.show()


print(f"Coefficiente di Pearson r = {r_value:.4f}")
print(f"Valore p = {p_value:.4g}")


# DB100K

# mrr = [ 0.363, 0.386, 0.36, 0.77, 0.746, 0.764, 0.843, 0.857, 0.825]

# h1 = [0.494, 0.522, 0.483, 0.844, 0.828, 0.842, 0.898, 0.91, 0.883]

# recall = [0.094, 0.077, 0.098, 0.124, 0.077, 0.147, 0.326, 0.241, 0.305]

# avg = [8.417833333, 7.891666667, 7.725666667, 9.1515, 9.482666667, 8.5575, 15.89983333, 12.30416667, 14.73716667]


# YAGO4-20

# mrr = [ 0.479, 0.489, 0.492, 0.575, 0.565, 0.642, 0.785, 0.788, 0.794 ]

# h1 = [ 0.571, 0.576, 0.579, 0.657, 0.647, 0.703, 0.827, 0.829, 0.834]

# recall = [ 0.089, 0.09, 0.104, 0.042, 0.001, 0.056, 0.074, 0.061, 0.078]

# avg = [9.072333333, 3.216666667, 7.290666667, 2.414166667, 0.5196666667, 2.168833333, 2.9645, 2.843833333, 3.063666667]



# Tutti i set

# mrr = [ 0.363, 0.386, 0.36, 0.479, 0.489, 0.492]

# h1 = [0.494, 0.522, 0.483, 0.571, 0.576, 0.579]

# recall = [0.094, 0.077, 0.099, 0.089, 0.09, 0.104]

# avg = [8.417833333, 7.891666667, 7.725666667, 9.072333333, 3.216666667, 7.290666667]


# Complex

# mrr = [ 0.843, 0.857, 0.825, 0.785, 0.788, 0.794 ]

# h1 = [ 0.898, 0.91, 0.883, 0.827, 0.829, 0.834]

# recall = [0.326, 0.241, 0.305, 0.074, 0.061, 0.078]

# avg = [ 15.89983333, 12.30416667, 14.73716667, 2.9645, 2.843833333, 3.063666667]



# ConvE

# mrr = [ 0.77, 0.746, 0.764, 0.575, 0.565, 0.642 ]

# h1 = [ 0.844, 0.828, 0.842, 0.657, 0.647, 0.703]

# recall = [0.124, 0.077, 0.147, 0.042, 0.001, 0.056]

# avg = [9.1515, 9.482666667, 8.5575, 2.414166667, 0.5196666667, 2.168833333]



# Tutti i set

# mrr = [ 0.363, 0.386, 0.36, 0.77, 0.746, 0.764, 0.843, 0.857, 0.825, 0.479, 0.489, 0.492, 0.575, 0.565, 0.642, 0.785, 0.788, 0.794 ]

# h1 = [0.494, 0.522, 0.483, 0.844, 0.828, 0.842, 0.898, 0.91, 0.883, 0.571, 0.576, 0.579, 0.657, 0.647, 0.703, 0.827, 0.829, 0.834]

# recall = [0.094, 0.077, 0.099, 0.124, 0.077, 0.147, 0.326, 0.241, 0.305, 0.089, 0.09, 0.104, 0.042, 0.001, 0.056, 0.074, 0.061, 0.078]

# avg = [8.417833333, 7.891666667, 7.725666667, 9.1515, 9.482666667, 8.5575, 15.89983333, 12.30416667, 14.73716667, 9.072333333, 3.216666667, 7.290666667, 2.414166667, 0.5196666667, 2.168833333, 2.9645, 2.843833333, 3.063666667]